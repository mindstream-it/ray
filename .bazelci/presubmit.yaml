---
buildifier:
  # keep these arguments in sync with .pre-commit-config.yaml
  # Use a specific version to avoid skew issues when new versions are released.
  version: 6.1.0
  warnings: "all"
.minimum_supported_version: &minimum_supported_version
  # For testing minimum supported version.
  # NOTE: Keep in sync with //:version.bzl
  bazel: 6.4.0
  skip_in_bazel_downstream_pipeline: "Bazel 6 required"
.reusable_config: &reusable_config
  build_targets:
    - "--"
    - "..."
    # As a regression test for #225, check that wheel targets still build when
    # their package path is qualified with the repo name.
    - "@rules_python//examples/wheel/..."
  build_flags:
    - "--keep_going"
    - "--build_tag_filters=-integration-test"
  test_targets:
    - "--"
    - "..."
  test_flags:
    - "--test_tag_filters=-integration-test"
.common_workspace_flags: &common_workspace_flags
  test_flags:
    - "--noenable_bzlmod"
  build_flags:
    - "--noenable_bzlmod"
.common_bazelinbazel_config: &common_bazelinbazel_config
    build_flags:
      - "--build_tag_filters=integration-test"
    test_flags:
      - "--test_tag_filters=integration-test"
      - "--jobs=2"
      # The integration tests are so expensive that only a few can be run concurrently
      # without harming overall reliability and runtime.
      - "--local_test_jobs=2"
    build_targets: ["..."]
    test_targets: ["..."]

.reusable_build_test_all: &reusable_build_test_all
  build_targets: ["..."]
  test_targets: ["..."]
.coverage_targets_example_bzlmod: &coverage_targets_example_bzlmod
  coverage_targets: ["..."]
